/* Container: responsive width, no silly caps */
.carousel-container.contain-mode {
  width: 100%;
  max-width: 100%;
  margin: 0 auto;
  padding: 0;                /* keep it tight */
}

/* Stage size adapts to image orientation */
.carousel-stage {
  position: relative;
  width: 100%;
  overflow: hidden;
  background: #0e0e0e;       /* subtle letterbox */
}

/* Landscape ~16:9, Portrait ~3:4, Square 1:1 */
.carousel-stage.ratio-landscape { aspect-ratio: 16 / 9; }
.carousel-stage.ratio-portrait  { aspect-ratio: 3 / 4;  }
.carousel-stage.ratio-square    { aspect-ratio: 1 / 1;  }

/* Make it taller on small phones (so images arenâ€™t tiny) */
@media (max-width: 480px) {
  .carousel-stage.ratio-landscape { aspect-ratio: 4 / 3; }  /* a bit taller */
}

/* Cross-fade between two absolutely positioned layers */
.slide {
  position: absolute;
  inset: 0;
  width: 100%;
  height: 100%;
  object-fit: contain;        /* ensures the whole image is visible */
  object-position: center;
  opacity: 1;
  transition: opacity 800ms ease;
  will-change: opacity;
  pointer-events: none;
  -webkit-backface-visibility: hidden;
  backface-visibility: hidden;
}

.slide.entering {
  opacity: 0;
}

.slide.exiting {
  opacity: 0;
}

.slide.is-active { z-index: 2; }
.slide.is-prev   { z-index: 1; }

/* Controls */
.prev-button,
.next-button {
  position: absolute;
  top: 50%;
  transform: translateY(-50%);
  background: rgba(0,0,0,0.45);
  color: #fff;
  border: 0;
  cursor: pointer;
  padding: 10px 14px;
  border-radius: 999px;
  z-index: 3;
  touch-action: manipulation;
}

.prev-button { left: 12px; }
.next-button { right: 12px; }

/* Respect reduced motion */
@media (prefers-reduced-motion: reduce) {
  .slide { transition: none; }
}